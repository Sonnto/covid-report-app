extends layout

block main-content 
    h1.page-title Areas in #{areas[0].region.name} with COVID data
    h2 Please select an area
    form(action='/report' method='GET' id='province-form')
        select(name='province')
            each a in areas
                option(value=a.region.province) #{a.region.province}
        input(type='hidden' name='regionIso' value=regionIso)
        input(type='submit' value='Submit')

    script.
        const form = document.getElementById('province-form');
        const select = form.querySelector('select');
        const options = select.querySelectorAll('option');
        const nullOptions = Array.from(options).filter(option => !option.value.trim()).length;
        const nonNullOptions = options.length - nullOptions;

        if (nonNullOptions <= 2 && nullOptions > 0) {
            form.submit();
        }
